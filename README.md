1. 项目介绍  
2. 安装 & 运行  
   - 环境要求  
   - 一键运行  
   - 手动运行  
3. 软件使用指南  
   - 界面功能说明  
   - 参数调整说明  
   - 示例  
4. 可能遇到的问题 & 解决方案  
5. 许可证  

---

📌 项目介绍

本工具通过 **通义千问 QwQ-Plus / VL-Max-Latest** 大模型，智能扩展文生视频和图生视频的提示词，使视频生成更加精准、生动。  

✅ 主要功能：  
- 支持文生视频 & 图生视频双模式  
- 内置高级优化格式，确保提示词符合大模型的最佳理解方式  
- 可自定义 System Message，适应不同的内容需求  
- 支持 Temperature & Top-P 参数调整，控制输出创意度  
- 自动检测依赖环境，无须手动配置  
- 简洁易用的 UI，通过 Gradio 交互  

---

📌 安装 & 运行

🔧 环境要求  
- Windows 10 / Windows 11  
- Python 3.8+  
- pip 21.0+  
- 稳定的网络连接（API 需要联网访问 DashScope 服务）  
- DashScope API Key（需提前申请）  

🚀 一键运行  

1. 解压项目文件到任意目录（例如 C:\PromptTool）。  
2. 申请 DashScope API Key，并配置环境变量：  

**方法 1**（临时设置，仅当前窗口有效）：  
```bat
set DASH_API_KEY=your_api_key_here
```
**方法 2**（永久设置）：  
- **Win + R**，输入 `sysdm.cpl`，回车  
- 选择 **高级 > 环境变量 > 新建**  
- 变量名填写 `DASH_API_KEY`，变量值填写你的 API Key，保存并重启电脑  

3. **双击 `run.bat`**，它会自动：  
   - 检查 Python 和 pip 是否可用  
   - 检测并安装缺失的依赖  
   - 启动 Gradio 界面（浏览器自动打开）  

🛠️ 手动运行  

如果你希望手动安装依赖 & 运行，可按以下步骤：  
```bash
# 进入项目目录
cd path/to/your/project

# 创建虚拟环境（推荐，但可选）
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # macOS / Linux

# 安装依赖
pip install -r requirements.txt

# 运行程序
python app.py
```
程序启动后，会自动打开浏览器的 Gradio UI。

---

📌 软件使用指南

🎨 界面功能说明  

主界面分为 3 大区域：  

1. **模式选择**  
   - **文生视频**（QwQ-Plus）: 只输入文本提示词，扩展后适用于纯文本到视频任务  
   - **图生视频**（VL-Max）: 上传图片 + 文本，扩展后适用于从静态图像生成视频  

2. **参数设置**  
   - **System Message**（可自定义，默认提供优化版本）  
   - **创造性（Temperature）**：值越大，输出的提示词越随机，适合更具创意的内容（推荐值 0.6-0.8）  
   - **Top-P 采样**：控制模型的采样范围，较高值（如 0.9）生成更丰富的内容  

3. **输出结果**  
   - 展示扩展后的提示词，可直接复制使用  

🛠️ 参数调整说明  

| 参数 | 作用 | 推荐值 |
|------|------|-------|
| Temperature | 控制模型的创造力，值越高，输出内容越多样 | 0.6 - 0.8 |
| Top-P | 控制采样的范围，较高值增加多样性 | 0.9 |
| System Message | 告诉大模型如何扩展提示词，影响最终结果 | 默认提供优化版本，可自定义 |

📌 示例  

✅ 文生视频  

输入：  
```
一个女孩在跳舞
```
输出：  
```
现代舞风格摄影，一位身穿黑色紧身舞衣的年轻女孩在宽敞的排练室中央翩翩起舞。
女孩表情专注，眼神坚定，她的手臂优雅地伸展，腿部做出高踢动作，展现出舞蹈的力量与美感。
排练室的木地板上投射出女孩的影子，增强了动态感。
背景是落地窗，透过窗户可以看到城市的天际线，黄昏时分的柔和光线洒入室内，营造出梦幻般的氛围。
采用低角度拍摄，强调女孩的舞蹈姿态，中景构图，捕捉到完整的舞蹈动作。
```

✅ 图生视频  

输入：
- 图片：上传一张 **森林中的小鹿**  
- 文本描述：`一只小鹿正在树林里缓缓行走`  

输出：
```
镜头聚焦于一只温顺的小鹿，它在阳光斑驳的森林间轻盈行走。
鹿的每一步都轻缓优雅，鼻尖微微嗅探空气。
森林背景中，风吹动枝叶，偶尔有几片枯叶落下。
低角度拍摄，让小鹿显得更加高雅，阳光透过树叶形成梦幻般的光影效果。
```

---

📌 可能遇到的问题 & 解决方案  

| 问题 | 解决方案 |
|--------|----------|
| **程序打不开** | 确保安装了 Python 3.8+，并检查环境变量是否配置正确 |
| **API Key 报错** | 确保 `DASH_API_KEY` 变量已正确配置 |
| **生成失败，提示 stream 模式** | 该模型只支持流式输出，已调整为 **stream=True** 解决 |
| **依赖安装失败** | 使用 `pip install --upgrade pip` 重新安装 `requirements.txt` |
| **图片无法加载** | 确保 **图生视频** 模式下已正确上传图片 |

---

📌 许可证  

本项目采用 **MIT License**，可自由修改和使用，但请注明出处。