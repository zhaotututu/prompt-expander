# 🎬 提示词扩展工具 - AI 视频提示词增强  
🚀 **支持文生视频 & 图生视频，智能优化你的 AI 生成提示词！**  

📌 **项目介绍**  

本工具基于 **通义千问 QwQ-Plus / VL-Max-Latest** 大模型，智能扩展 **文生视频** 和 **图生视频** 的提示词，使生成结果更加精准、生动。  

✅ **主要功能**  
- **双模式支持**：文生视频 & 图生视频  
- **优化提示词格式**：确保最大程度适配大模型理解  
- **自定义 System Message**：可调整提示词扩展方式  
- **可调节 Temperature & Top-P**：控制输出的创造性与多样性  
- **自动检测环境依赖**：无须手动配置，开箱即用  
- **简洁易用的 Gradio 界面**：直观、快速的 UI 交互  

---

## 📌 安装 & 运行  

### 🔧 环境要求  
- Windows 10 / Windows 11  
- Python 3.8+  
- pip 21.0+  
- DashScope API Key（需提前申请）  

### 🚀 一键运行  
！！！！！注意，如果下载压缩包，请点击页面右边Releases下面的Prompt Expander v1.0.1 - Repackaging，下载prompt-expander.rar即可，其他那两个GITHUB自动打包的文件会报错。！！！！！


推荐直接采用$ git clone https://github.com/zhaotututu/prompt-expander.git
方式下载。下载完成后：

1. **解压项目文件** 到任意目录（例如 `C:\PromptTool`）  
2. **申请 DashScope API Key**，并配置环境变量：  （注意！一定要先申请一下API Key然后再运行，否则一定会报错）
申请方式非常简单：

阿里大模型API申请页面：
https://dashscope.console.aliyun.com/overview
点击登录
（没账号就注册一个）
点击API-KEY管理
点击创建新的API-KEY
复制新创建的API-KEY


设置API Key的方法：
**方法 1**（临时设置，仅当前窗口有效）：  
```bat
set DASH_API_KEY=your_api_key_here
```
**方法 2**（永久设置）：  
- **Win + R**，输入 `sysdm.cpl`，回车  
- 选择 **高级 > 环境变量 > 新建**  
- 变量名填写 `DASH_API_KEY`，变量值填写你的 API Key，保存并重启电脑  

**方法 3**（方便但是不安全）：  
- **用记事本打开config.py
- 找到os.environ["DASH_API_KEY"] = "请在这里填入你的API KEY"，填入API KEY*  

3. **双击 `双击我运行.bat`**，工具会自动：  
   - 检查 Python 和 pip 是否可用  
   - 检测 & 安装缺失的依赖  
   - 启动 Gradio UI（浏览器自动打开）  

### 🛠️ 手动运行  

如果希望手动安装依赖，可按以下步骤：  
```bash
# 进入项目目录
cd path/to/your/project

# 创建虚拟环境（可选）
python -m venv venv
venv\Scripts\activate  # Windows
source venv/bin/activate  # macOS / Linux

# 安装依赖
pip install -r requirements.txt

# 运行程序
python app.py
```
程序启动后，浏览器将自动打开 **Gradio UI**。  

---

## 📌 软件使用指南  

### 🎨 界面功能  

1. **模式选择**  
   - **文生视频**（QwQ-Plus）: 仅输入文本，扩展成适合生成视频的提示词  
   - **图生视频**（VL-Max）: 上传图片 + 文本，扩展成适合从静态图像生成视频的提示词  

2. **参数设置**  
   - **System Message**（可自定义，默认提供优化版本）  
   - **Temperature**：控制创造性，值越高，结果越随机（推荐 0.6-0.8）  
   - **Top-P**：控制模型采样范围，较高值（如 0.9）提供更丰富的输出  

3. **输出结果**  
   - 生成的优化提示词可直接复制使用  

### 🛠️ 参数调整  

| 参数 | 作用 | 推荐值 |
|------|------|-------|
| Temperature | 控制创造力，值越高，输出越多样 | 0.6 - 0.8 |
| Top-P | 影响采样范围，越高内容越丰富 | 0.9 |
| System Message | 影响提示词扩展方式 | 默认提供优化版本，可自定义 |

### 📌 示例  

✅ **文生视频**  

输入：  
```
一个女孩在跳舞
```
输出：  
```
现代舞风格摄影，一位身穿黑色紧身舞衣的年轻女孩在宽敞的排练室中央翩翩起舞。
女孩表情专注，眼神坚定，她的手臂优雅地伸展，腿部做出高踢动作，展现舞蹈的力量与美感。
背景是落地窗，透过窗户可以看到城市天际线，黄昏柔和的光线洒入室内，营造梦幻氛围。
低角度拍摄，中景构图，捕捉完整舞蹈动作。
```

✅ **图生视频**  

输入：  
- **图片**：上传一张森林中的小鹿  
- **文本描述**：`一只小鹿正在树林里缓缓行走`  

输出：  
```
镜头聚焦于一只温顺的小鹿，它在阳光斑驳的森林间轻盈行走。
鹿的每一步都轻缓优雅，鼻尖微微嗅探空气。
背景中，风吹动枝叶，偶尔有几片枯叶落下。
低角度拍摄，阳光透过树叶形成梦幻光影效果。
```

---

## 📌 可能遇到的问题 & 解决方案  

| 问题 | 解决方案 |
|--------|----------|
| **程序无法启动** | 确保安装了 Python 3.8+，检查环境变量 |
| **API Key 无效** | 确保 `DASH_API_KEY` 配置正确 |
| **提示 stream 模式错误** | 该模型仅支持流式输出，已调整 `stream=True` |
| **依赖安装失败** | 运行 `pip install --upgrade pip` 后重新安装 |
| **图片无法加载** | 确保 **图生视频** 模式下已正确上传图片 |

---

## 📌 许可证  

本项目采用 **MIT License**，可自由修改和使用，但请注明出处。  

---

## 📌 更新日志  

### 🔹 v1.0.0 - 2025-03-07  
- **初始发布** 🎉  
- 支持 **文生视频** & **图生视频**  
- 提供 **Gradio UI 界面**  
- **优化提示词格式**，提高 AI 生成质量  
- **自定义 System Message**，满足不同需求  

---

🎯 **欢迎加入赵图图的知识星球** 🎯  
💡 **星球号：12116758**  
📌 **QQ群**：  
- 小粉屋 628266084  
- 小绿屋 903753035  
- 小黑屋 950351015  

后续更新计划：
 增加更多大模型支持：可切换 QwQ-Plus / VL-Max / OpenAI / DS等
 增加批量处理能力：支持一次性输入多个提示词，批量扩展
 智能优化提示词：自动判断输入是否合理，并给出优化建议
 增加提示词模板：提供不同风格的模板，例如 科幻 / 动漫 / 电影感
 支持多语言：提供 中文 / 英文 / 日语 / 其他语言 选项
 支持 API 访问：提供 REST API，让开发者可以集成到自己的项目中

🔗 **GitHub 项目地址**：[prompt-expander](https://github.com/zhaotututu/prompt-expander)  
